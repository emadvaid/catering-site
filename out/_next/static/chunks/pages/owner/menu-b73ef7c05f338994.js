(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[914],{9618:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/owner/menu",function(){return s(5728)}])},9044:function(e,t,s){"use strict";s.d(t,{Z:function(){return Footer}});var n=s(5893);function Footer(){return(0,n.jsx)("footer",{className:"bg-gray-100 border-t mt-12",children:(0,n.jsxs)("div",{className:"container mx-auto px-4 py-6 text-center text-sm text-gray-600",children:["\xa9 ",new Date().getFullYear()," Friend's Catering — Phone: (555) 555-5555 — Email: info@example.com"]})})}},2907:function(e,t,s){"use strict";s.d(t,{Z:function(){return Header}});var n=s(5893),a=s(1664),l=s.n(a),r=s(3299),i=s(5770),o=s(2091);function Header(){let{data:e}=(0,r.useSession)(),{getCartCount:t}=(0,i.j)(),s=t();return(0,n.jsx)("header",{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white shadow-lg",children:(0,n.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)("div",{className:"text-2xl font-bold",children:"Kabab Hut Catering"})}),(0,n.jsxs)("nav",{className:"flex items-center gap-6",children:[(0,n.jsx)(l(),{href:"/",className:"hover:text-yellow-300 transition",children:"Home"}),(0,n.jsx)(l(),{href:"/menu",className:"hover:text-yellow-300 transition",children:"Menu"}),(0,n.jsx)(l(),{href:"/about",className:"hover:text-yellow-300 transition",children:"About"}),(0,n.jsx)(l(),{href:"/contact",className:"hover:text-yellow-300 transition",children:"Contact"}),(0,n.jsxs)(l(),{href:"/cart",className:"relative hover:text-yellow-300 transition",children:[(0,n.jsx)(o.FeP,{size:24}),s>0&&(0,n.jsx)("span",{className:"absolute -top-2 -right-2 bg-yellow-400 text-red-600 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",children:s})]}),e?(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("span",{className:"text-sm",children:e.user.name||e.user.email}),("owner"===e.user.role||"root"===e.user.role)&&(0,n.jsx)(l(),{href:"/dashboard/owner",className:"hover:text-yellow-300",children:"Dashboard"}),(0,n.jsx)("button",{onClick:()=>(0,r.signOut)(),className:"px-3 py-1 bg-white text-red-600 rounded hover:bg-yellow-100 transition",children:"Logout"})]}):(0,n.jsx)(l(),{href:"/login",className:"px-4 py-2 bg-yellow-400 text-red-600 rounded font-semibold hover:bg-yellow-300 transition",children:"Login"})]})]})})}},5728:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return OwnerMenu}});var n=s(5893),a=s(7294),l=s(2907),r=s(9044);function fetchWithRole(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=localStorage.getItem("role");return t.headers=Object.assign({},t.headers,{"content-type":"application/json","x-role":s}),fetch(e,t)}function OwnerMenu(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(null),[o,c]=(0,a.useState)({name:"",desc:"",price:""}),[d,m]=(0,a.useState)(null);async function load(){let e=await fetch("/api/menu"),s=await e.json();t(s||[])}function resetForm(){i(null),c({name:"",desc:"",price:""})}async function save(e){if(e.preventDefault(),s){let e={id:s,...o};await fetchWithRole("/api/menu",{method:"PUT",body:JSON.stringify(e)})}else await fetchWithRole("/api/menu",{method:"POST",body:JSON.stringify(o)});resetForm(),load()}async function remove(e){confirm("Delete this item?")&&(await fetchWithRole("/api/menu?id=".concat(e),{method:"DELETE"}),load())}return(0,a.useEffect)(()=>{load()},[]),(0,a.useEffect)(()=>{let e=localStorage.getItem("role");fetch("/api/stats",{headers:{"x-role":e}}).then(e=>e.json()).then(e=>m(e)).catch(()=>m(null))},[]),(0,n.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,n.jsx)(l.Z,{}),(0,n.jsxs)("main",{className:"container mx-auto px-4 py-12 flex-grow",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Manage Menu"}),(0,n.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"font-semibold mb-2",children:"Items"}),(0,n.jsx)("div",{className:"space-y-3",children:e.map(e=>{var t,s;return(0,n.jsxs)("div",{className:"p-3 border rounded bg-white flex justify-between items-start",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"font-semibold",children:[e.name," ",(0,n.jsxs)("span",{className:"text-sm text-gray-600",children:["$",e.price]})]}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:e.desc}),d&&d.topItems&&(0,n.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Sold: ",null!==(s=null===(t=d.topItems.find(t=>t.name===e.name))||void 0===t?void 0:t.qty)&&void 0!==s?s:0]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("button",{onClick:()=>{i(e.id),c({name:e.name,desc:e.desc,price:e.price})},className:"px-2 py-1 border rounded text-sm",children:"Edit"}),(0,n.jsx)("button",{onClick:()=>remove(e.id),className:"px-2 py-1 border rounded text-sm",children:"Delete"})]})]},e.id)})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"font-semibold mb-2",children:s?"Edit Item":"Add Item"}),(0,n.jsxs)("form",{onSubmit:save,className:"space-y-3",children:[(0,n.jsxs)("label",{className:"block",children:["Name",(0,n.jsx)("input",{value:o.name,onChange:e=>c({...o,name:e.target.value}),className:"block w-full border rounded p-2 mt-1"})]}),(0,n.jsxs)("label",{className:"block",children:["Description",(0,n.jsx)("input",{value:o.desc,onChange:e=>c({...o,desc:e.target.value}),className:"block w-full border rounded p-2 mt-1"})]}),(0,n.jsxs)("label",{className:"block",children:["Price",(0,n.jsx)("input",{value:o.price,onChange:e=>c({...o,price:e.target.value}),className:"block w-full border rounded p-2 mt-1"})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded",children:"Save"}),(0,n.jsx)("button",{type:"button",onClick:resetForm,className:"px-3 py-2 border rounded",children:"Cancel"})]})]})]})]})]}),(0,n.jsx)(r.Z,{})]})}}},function(e){e.O(0,[365,913,774,888,179],function(){return e(e.s=9618)}),_N_E=e.O()}]);