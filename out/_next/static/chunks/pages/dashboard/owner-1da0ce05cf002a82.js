(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66],{4850:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/owner",function(){return t(1199)}])},1199:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSP:function(){return j},default:function(){return OwnerDashboard}});var a=t(5893),n=t(3299),r=t(7294),l=t(1163),o=t(8687),d=t(385),i=t(3023),c=t(5358),x=t(6224),m=t(1700),h=t(1408),u=t(4831),b=t(5105),g=t(3162),p=t(2091),j=!0;function OwnerDashboard(){let{data:e}=(0,n.useSession)(),s=(0,l.useRouter)(),[t,j]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async function(){var s;if(!(null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.role))return;let t=await fetch("/api/stats",{headers:{"x-role":e.user.role}}),a=await t.json();j(a)})()},[e]),(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto bg-white shadow-md rounded-lg p-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Owner Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Welcome, Owner! Manage your menus, invoices, and analytics here."}),(0,a.jsxs)("div",{className:"flex gap-4 mb-8",children:[(0,a.jsx)("button",{onClick:()=>s.push("/dashboard/manage-menu"),className:"px-6 py-3 bg-green-600 text-white rounded-lg shadow hover:bg-green-700 font-semibold",children:"Manage Menu"}),(0,a.jsx)("button",{onClick:()=>s.push("/dashboard/manage-invoices"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 font-semibold",children:"Manage Invoices"})]}),t?(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Business Analytics"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["$",t.totalRevenue.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Orders"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:t.totalOrders})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Customers"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:t.totalCustomers})]}),(0,a.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Repeat Customers"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:t.repeatCustomers})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-3",children:"Current Month"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Revenue: ",(0,a.jsxs)("span",{className:"font-bold text-green-600",children:["$",t.currentMonthRevenue.toFixed(2)]})]}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Orders: ",(0,a.jsx)("span",{className:"font-bold",children:t.currentMonthOrders})]})]}),(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-3",children:"Last Month"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Revenue: ",(0,a.jsxs)("span",{className:"font-bold text-blue-600",children:["$",t.lastMonthRevenue.toFixed(2)]})]}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Orders: ",(0,a.jsx)("span",{className:"font-bold",children:t.lastMonthOrders})]})]})]}),(0,a.jsxs)("div",{className:"mb-8 border rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-3",children:"Customer Retention"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600",children:"New Customers"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:t.newCustomers})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Repeat Customers"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:t.repeatCustomers})]})]})]}),t.monthlyBreakdown&&t.monthlyBreakdown.length>0&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Monthly Revenue Trend"}),(0,a.jsxs)(o.w,{width:800,height:300,data:t.monthlyBreakdown,margin:{top:20,right:30,left:20,bottom:5},className:"mx-auto",children:[(0,a.jsx)(d.q,{strokeDasharray:"3 3"}),(0,a.jsx)(i.K,{dataKey:"month"}),(0,a.jsx)(c.B,{}),(0,a.jsx)(x.u,{}),(0,a.jsx)(m.D,{}),(0,a.jsx)(h.x,{type:"monotone",dataKey:"revenue",stroke:"#4F46E5",strokeWidth:2})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Top Menu Items by Revenue"}),(0,a.jsxs)(u.v,{width:800,height:300,data:t.topItems.slice(0,10),margin:{top:20,right:30,left:20,bottom:5},className:"mx-auto",children:[(0,a.jsx)(d.q,{strokeDasharray:"3 3"}),(0,a.jsx)(i.K,{dataKey:"name"}),(0,a.jsx)(c.B,{}),(0,a.jsx)(x.u,{}),(0,a.jsx)(m.D,{}),(0,a.jsx)(b.$,{dataKey:"revenue",fill:"#10B981"})]})]}),(0,a.jsxs)("button",{onClick:function(){if(!t)return;let e=[["Metric","Value"],["Total Revenue",t.totalRevenue],["Total Orders",t.totalOrders],["Total Customers",t.totalCustomers],["New Customers",t.newCustomers],["Repeat Customers",t.repeatCustomers],["Current Month Revenue",t.currentMonthRevenue],["Last Month Revenue",t.lastMonthRevenue],["Current Month Orders",t.currentMonthOrders],["Last Month Orders",t.lastMonthOrders],[""],["Top Items","Quantity","Revenue"],...t.topItems.map(e=>[e.name,e.qty,e.revenue])].map(e=>e.join(",")).join("\n"),s=new Blob([e],{type:"text/csv;charset=utf-8;"});(0,g.saveAs)(s,"analytics.csv")},className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 font-semibold",children:[(0,a.jsx)(p.aBF,{})," Export Analytics to CSV"]})]}):(0,a.jsx)("p",{className:"text-gray-500",children:"Loading analytics..."})]})})}}},function(e){e.O(0,[365,24,774,888,179],function(){return e(e.s=4850)}),_N_E=e.O()}]);